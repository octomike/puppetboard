{% extends 'layout.html' %}
{% import '_macros.html' as macros %}
{% block content %}
<table id="inventory_table" class='ui fixed compact very basic sortable table'>
  <thead>
    <tr>
      {% for head in fact_headers %}
      <th>{{head}}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody class="searchable">
    {% for node, facts in fact_data.iteritems() %}
    <tr>
      {% for name in fact_names %}
        {% set item = facts.get(name, 'undef') %}
        {% if item.startswith('http://') or item.startswith('https://') %}
          <td><a href="{{item}}"><i class='large darkblue archive icon'></i</a></td>
        {% elif item=='undef' %}
          <td><i class="large ban icon"></i></td>
        {% else %}
          <td><a href="{{url_for('node', env=current_env, node_name=node)}}">{{item}}</a></td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock content %}
{% block onload_script %}
{% macro extra_options(caller) %}
  'serverSide': false,
{% endmacro %}
{{ macros.datatable_init(table_html_id="inventory_table", ajax_url=url_for('inventory_ajax', env=current_env), default_length=config.NORMAL_TABLE_COUNT, length_selector=config.TABLE_COUNT_SELECTOR, extra_options=extra_options) }}
{% endblock onload_script %}
